<?php//配置access_token存放位置$access_tokenpath="Cache";$access_tokenfilename = "access_token.php";$filename=$access_tokenpath.'/'.$access_tokenfilename;if (!file_exists($filename)) {	//不存在access_token.json文件时	//touch($filename);	//微信服务器获取access_token	$appid = $_GET["appid"];	$appsecret = $_GET["appsecret"];	if(!$appid) {$appid='wx667d638b4fb5d2fe';}	if(!$appsecret) {$appsecret='ddd22f6725e359c742e3ae0b205f480b';}	$url='https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid='.$appid.'&secret='.$appsecret.'';	$jsondata = file_get_contents($url);	$arr = json_decode($jsondata);	$arr->expires_in=($arr->expires_in)+time();	$jsondata= json_encode($arr);	file_put_contents($filename,$jsondata);}else{	//存在access_token.json文件时	//读取access_token	echo "111";	$jsondata = file_get_contents($filename);	$arr = json_decode($jsondata);	$expirestime=$arr->expires_in;	if($expirestime>time() or $jsondata<>''){		//access_token凭证有效时间还在有效期		$access_token=$arr->access_token;				}else{	//微信服务器获取access_token		$appid='wxf491cdc4b85949c6';	$appsecret='251039ab773b9e2b5e328356e8f5592e';	$url='https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid='.$appid.'&secret='.$appsecret.'';	$jsondata = file_get_contents($url);	$arr = json_decode($jsondata);	$arr->expires_in=($arr->expires_in)+time();	$jsondata= json_encode($arr);	file_put_contents($filename,$jsondata);			}}function getaccess_token(){	//微信服务器获取access_token	$appid = $_GET["appid"];	$appsecret = $_GET["appsecret"];	if(!$appid) {$appid='wxf491cdc4b85949c6';}	if(!$appsecret) {$appsecret='251039ab773b9e2b5e328356e8f5592e';}	$url='https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid='.$appid.'&secret='.$appsecret.'';	$jsondata = file_get_contents($url);	$arr = json_decode($jsondata);	$arr->expires_in=($arr->expires_in)+time();	$jsondata= json_encode($arr);	file_put_contents($filename,$jsondata);}?>